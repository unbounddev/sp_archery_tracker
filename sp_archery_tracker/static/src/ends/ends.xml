<?xml version="1.0" encoding="utf-8"?>
<templates xml:space="preserve">
  <t t-name="sp_archery_tracker.Ends">
    <ul class="ends" t-if="value.ends">
      <li class="end" t-foreach="value.ends" t-as="end" t-key="end_index">
        <div class="end_header">
          <div>
            <span class="end_title">End <t t-esc="end_index+1" /></span>
            <span class="end_distance"><input class="end_distance_input" type="text" list="distanceSuggestions" t-att-value="end.distance" t-on-change="(e) => handleDistanceChange(e, end_index)" /><t t-esc="end.unit" /></span>
          </div>
          <div class="end_score" t-if="end.score !== undefined &amp;&amp; end.score !== null"><t t-esc="end.score" /></div>
        </div>
        <ul class="end_arrows">
          <li t-foreach="end.arrows" t-as="arrow" t-key="arrow_index"><button class="arrow" t-att-data-value="arrow" t-on-click="() => openArrowDialog(true, end_index, arrow_index)"><t t-esc="arrow" /></button></li>
          <li><button class="add_arrow_btn" t-on-click="() => openArrowDialog(false, end_index)"><i class="fa fa-plus"></i></button></li>
        </ul>
      </li>
    </ul>
    <button id="add_end_btn" t-on-click="addEnd">Add End</button>
    <t t-call="sp_archery_tracker.ArrowDialog" />
    <t t-call="sp_archery_tracker.DistanceSuggestions" />
  </t>
  <t t-name="sp_archery_tracker.ArrowDialog">
    <div class="arrow_dialog_container" t-if="state.showArrowDialog">
    <div class="arrow_dialog">
      <div class="arrow_dialog_header">
        <h1 t-if="state.editingArrow">Edit Arrow</h1>
        <h1 t-else="">Add Arrow</h1>
        <button class="close_btn" t-on-click="closeArrowDialog">X</button></div>
      <div class="arrow_dialog_content">
        <t t-set="arrowValues" t-value="['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'X']" />
        <button class="arrow_value" t-foreach="arrowValues" t-as="arrowValue" t-key="arrowValue" t-att-data-value="arrowValue" t-on-click="() => state.editingArrow ? setArrow(arrowValue) : addArrow(arrowValue)"><t t-esc="arrowValue" /></button>
      </div>
      <div class="arrow_dialog_footer"><button class="arrow_dialog_delete_btn" t-on-click="deleteArrow" t-if="state.editingArrow">Delete Arrow</button></div>
    </div>
  </div>
  </t>
  <t t-name="sp_archery_tracker.DistanceSuggestions">
    <t t-set="distanceSuggestions" t-value="[10, 11, 14, 15, 17, 19, 20, 23, 25, 28, 30, 32, 35, 36, 40, 41, 44, 45, 48, 50, 52, 53, 55, 58, 59, 60, 61, 64, 65, 70, 80]" />
    <datalist id="distanceSuggestions">
      <option t-att-value="suggestion" t-foreach="distanceSuggestions" t-as="suggestion" t-key="suggestion" />
    </datalist>
  </t>
</templates>
